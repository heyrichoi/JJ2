<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´ì œë¡œìŠ¤ ì‹œë®¬ë ˆì´í„°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-image: url('https://imgur.com/C8zFD93.png');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            width: 100%;
        }

        .title {
            text-align: center;
            margin: 20px 0 40px 0;
        }

        .main-title {
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
        }

        .game-screen {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            width: 100%;
            max-width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
        }

        .character-selection {
            text-align: center;
        }

        .selection-title {
            font-size: 2rem;
            color: #ff6b6b;
            margin-bottom: 30px;
            font-weight: 800;
        }

        .character-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .character-card {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .character-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
            border-color: #ff6b6b;
        }

        .character-card.breaker-card:hover {
            box-shadow: 0 15px 35px rgba(255, 215, 0, 0.6);
            border-color: #ffd700;
        }

        .character-image {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            object-fit: cover;
        }

        .character-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .character-desc {
            font-size: 1rem;
            color: #e0e6ed;
            margin-bottom: 15px;
        }

        .character-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .op-status {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
        }

        .weak-status {
            background: linear-gradient(45deg, #ff5252, #ff8a80);
            color: #fff;
        }

        .battle-screen {
            display: none;
        }

        .game-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
        }

        .turn-info {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffa726;
        }

        .boss-hp-container {
            flex: 1;
            margin-left: 40px;
        }

        .hp-label {
            font-size: 1rem;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .hp-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff5252, #ff8a80);
            transition: width 0.5s ease;
        }

        .hp-text {
            font-size: 0.9rem;
            margin-top: 5px;
            font-weight: 600;
        }

        .battle-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            padding: 20px;
        }

        .player-area, .boss-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .battle-character, .battle-boss {
            width: 150px;
            height: 150px;
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 25px rgba(255, 107, 107, 0.4);
            object-fit: cover;
        }

        .battle-character.breaker-glow {
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            border-color: #ffd700;
        }

        .character-label, .boss-label {
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 16px;
            border-radius: 15px;
            font-weight: 700;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .vs-text {
            font-size: 2.5rem;
            font-weight: 900;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .action-log {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            min-height: 100px;
            font-size: 1rem;
            line-height: 1.6;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .skills-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .skill-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .skill-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .skill-btn.breaker-skill {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
        }

        .skill-btn.breaker-skill:hover {
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
        }

        .result-screen {
            display: none;
            text-align: center;
        }

        .result-content {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            padding: 40px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .result-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 800;
        }

        .victory-title {
            color: #66bb6a;
        }

        .defeat-title {
            color: #ff5252;
        }

        .result-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin: 20px 0;
        }

        .retry-btn {
            background: linear-gradient(45deg, #66bb6a, #81c784);
            border: none;
            color: #ffffff;
            padding: 15px 30px;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .retry-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 187, 106, 0.5);
        }

        .damage-flash {
            animation: damage-flash 0.4s ease-out;
        }

        @keyframes damage-flash {
            0% { filter: brightness(2) saturate(2); }
            100% { filter: brightness(1) saturate(1); }
        }

        .critical-hit {
            animation: critical-hit 0.6s ease-out;
        }

        @keyframes critical-hit {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .floating-damage {
            position: absolute;
            font-size: 2rem;
            font-weight: 900;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: float-up 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .character-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .battle-area {
                flex-direction: column;
                gap: 20px;
            }
            
            .battle-character, .battle-boss {
                width: 120px;
                height: 120px;
            }
            
            .vs-text {
                font-size: 2rem;
            }
            
            .skills-container {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .game-status {
                flex-direction: column;
                gap: 15px;
            }
            
            .boss-hp-container {
                margin-left: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="title">
            <h1 class="main-title">ì¹´ì œë¡œìŠ¤ ì‹œë®¬ë ˆì´í„°</h1>
        </div>

        <!-- ìºë¦­í„° ì„ íƒ í™”ë©´ -->
        <div class="game-screen character-selection" id="character-selection">
            <h2 class="selection-title">ğŸ”¥ ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”! ğŸ”¥</h2>
            <div class="character-grid">
                <div class="character-card breaker-card" onclick="selectCharacter('breaker')">
                    <img src="https://imgur.com/3ZsRiq4.png" alt="ë¸Œë ˆì´ì»¤" class="character-image">
                    <h3 class="character-name">ë¸Œë ˆì´ì»¤</h3>
                    <p class="character-desc">í—¤ë“œ ë”œëŸ¬ì˜ ìˆ™ëª…</p>
                    <div class="character-status op-status">í˜¸ì‹ íˆ¬ê¸° ë³´ìœ </div>
                </div>

                <div class="character-card" onclick="selectCharacter('striker')">
                    <img src="https://imgur.com/2CnlLrA.png" alt="ìŠ¤íŠ¸ë¼ì´ì»¤" class="character-image">
                    <h3 class="character-name">ìŠ¤íŠ¸ë¼ì´ì»¤</h3>
                    <p class="character-desc">ë°±ì–´íƒì˜ ë‹¬ì¸</p>
                    <div class="character-status weak-status">ì¹˜ì  ì‹œë„ˆì§€</div>
                </div>
            </div>
        </div>

        <!-- ì „íˆ¬ í™”ë©´ -->
        <div class="game-screen battle-screen" id="battle-screen">
            <div class="game-status">
                <div class="turn-info">í„´: <span id="current-turn">1</span>/7</div>
                <div class="boss-hp-container">
                    <div class="hp-label">ì¹´ì œë¡œìŠ¤ HP</div>
                    <div class="hp-bar">
                        <div class="hp-fill" id="boss-hp-bar"></div>
                    </div>
                    <div class="hp-text"><span id="boss-current-hp">1000</span>/1000</div>
                </div>
            </div>

            <div class="battle-area">
                <div class="player-area">
                    <img id="player-image" src="" alt="í”Œë ˆì´ì–´" class="battle-character">
                    <div class="character-label" id="player-name"></div>
                </div>

                <div class="vs-text">VS</div>

                <div class="boss-area">
                    <img src="https://imgur.com/3yUgLfB.jpg" alt="ì¹´ì œë¡œìŠ¤" class="battle-boss" id="boss-image">
                    <div class="boss-label">ì¹´ì œë¡œìŠ¤</div>
                </div>
            </div>

            <div class="action-log" id="action-log">
                ì¹´ì œë¡œìŠ¤ê°€ ë‚˜íƒ€ë‚¬ë‹¤! ì „ì„¤ì˜ ì‹œì‘ì´ë‹¤!
            </div>

            <div class="skills-container" id="skills-container">
                <!-- ìŠ¤í‚¬ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì  ìƒì„± -->
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div class="game-screen result-screen" id="result-screen">
            <div class="result-content" id="result-content">
                <!-- ê²°ê³¼ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì  ìƒì„± -->
            </div>
            <button class="retry-btn" onclick="resetGame()">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            character: null,
            bossHp: 1000,
            maxBossHp: 1000,
            currentTurn: 1,
            maxTurns: 7,
            isGameActive: false
        };

        // ìºë¦­í„° ë°ì´í„°
        const characters = {
            breaker: {
                name: "ë¸Œë ˆì´ì»¤",
                image: "https://imgur.com/3ZsRiq4.png",
                skills: ["ìˆ˜ë¼ê²°", "ì„±ìš´ë©¸ì‡„ê¶Œ", "íŒŒì²œì„¬ê´‘", "ì²­ì›”ë‚œë¬´"]
            },
            striker: {
                name: "ìŠ¤íŠ¸ë¼ì´ì»¤",
                image: "https://imgur.com/2CnlLrA.png", 
                skills: ["ì²­ì—¼ê°", "ë‡Œí˜¸ê²©", "í’ì‹ ì´ˆë˜", "ë°©ì²œê²©"]
            }
        };

        // ë¸Œë ˆì´ì»¤ ê¸ì • ë©”ì‹œì§€
        const breakerPositiveMessages = [
            "ì›Œë¡œë“œê°€ í—¤ë“œ ì–´ê·¸ë¡œë¥¼ ì¡ì•„ì¤¬ë‹¤! í—¤ë“œì— ìˆ˜ë¼ê²° í’€í‹±!",
            "ìŠ¤í‚¬ì„ ì“°ëŠ”ë° ì˜í—ˆë‹˜ì´ ì¹´ìš´í„°ë¥¼ ì³ì£¼ì…¨ë‹¤! í”„ë¦¬ë”œ!",
            "ìŠˆí¼ í”¼ë©´ ë¬´ì‹œëŠ” ì¡´ì¬í•˜ì§€ ì•Šì•˜ë‹¤! BJí˜¸ì‹ íˆ¬ê¸°!",
            "ìê·¸ë§ˆí•œ ë‚™ì‚¬ ë§µì—ì„œ í˜¸ì‹ íˆ¬ê¸° í™œì•½!"
        ];

        // ë¸Œë ˆì´ì»¤ ë¶€ì • ë©”ì‹œì§€ (ê¸°ì¡´ê³¼ ë™ì¼)
        const breakerNegativeMessages = [
            "ì¹´ì œë¡œìŠ¤ê°€ ë¨¸ë¦¬ë¥¼ ëŒë ¤ì„œ í—¤ë“œì— ì ì¤‘í•˜ì§€ ì•Šì•˜ë‹¤!",
            "íŒ¨í„´ ì¤‘ì´ë¼ í—¤ë“œê°€ ì•ˆì „í•˜ì§€ ì•Šì•„ì„œ ìŠ¤í‚¬ì´ ë¹—ë‚˜ê°”ë‹¤!",
            "í—¤ë“œ ìœ„ì¹˜ê°€ ë„ˆë¬´ ìœ„í—˜í•´ì„œ ì œëŒ€ë¡œ ë”œì„ ë„£ì„ ìˆ˜ ì—†ì—ˆë‹¤!",
            "ì¹´ì œë¡œìŠ¤ê°€ ì•ì— ìŠˆí¼ í”¼ë©´ ë¬´ì  íŒ¨í„´ì„ ì‚¬ìš©í•´ í”¼ë©´ì´ í’€ë ¤ ì ì¤‘í•˜ì§€ ëª»í–ˆë‹¤!"
        ];

        // ìŠ¤íŠ¸ë¼ì´ì»¤ ê¸ì • ë©”ì‹œì§€ (ê¸°ì¡´ê³¼ ë™ì¼)
        const strikerPositiveMessages = [
            "ì˜†êµ¬ë¦¬ì— ì¼ì§€ë§Œ ë§ˆì¹¨ ì›Œë¡œë“œë¥¼ ë°”ë¼ë³¸ ì¹´ì œë¡œìŠ¤ ë•ë¶„ì— ë°±ì— ìŠ¤í‚¬ì„ ë°•ì„ ìˆ˜ ìˆì—ˆë‹¤!",
            "ë°±ì–´íƒ í”„ë¦¬ë”œ íƒ€ì´ë°ì´ì—ˆë‹¤! ì™„ë²½í•œ ë”œë§!",
            "ì¹´ì œë¡œìŠ¤ê°€ ì•ì„ ê³µê²©í•˜ëŠ” ë™ì•ˆ ë°±ì—ì„œ ì•ˆì „í•˜ê²Œ ë”œì„ ë„£ì—ˆë‹¤!",
            "ìŠ¤íŠ¸ë¼ì´ì»¤ë¥¼ ì‚¬ë‘í•œ ë¸”ë ˆì´ë“œ ì‹œë„ˆì§€ë¥¼ ë°›ì•„ ë” í° ë”œëŸ‰!",
            "ì«€ìˆ­ì´ë“¤ì˜ ì‘ì›ìœ¼ë¡œ ë” ë†’ì€ ë°ë¯¸ì§€!"
        ];

        // ìŠ¤íŠ¸ë¼ì´ì»¤ ë¶€ì • ë©”ì‹œì§€
        const strikerNegativeMessages = [
            "ë°±ì–´íƒ ë”œëŸ¬ê°€ ë„ˆë¬´ ë§ì•„ì„œ í—¤ë“œì— ë°•ì•˜ë‹¤! ë°ë¯¸ì§€ ê°ì†Œ!",
            "ë°±ì–´íƒ í”„ë¦¬ë”œ êµ¬ê°„ì¸ ì¤„ ì•Œì•˜ëŠ”ë° ë€ê° ê¸°ë¯¹ êµ¬ê°„ì´ì—ˆë‹¤...",
            "ë°±ì— ì—°ì† í”¼ê²© ì´ìƒ íŒ¨í„´! í˜¸ì‹ íˆ¬ê¸°ê°€ ê·¸ë¦½ë‹¤...",
            "ë§µì´ ì‘ì•„ ë‚™ì‚¬ê°€ ë‘ë µë‹¤! ì—ê²ë”œì„ í–ˆë‹¤..."
        ];

        // ìºë¦­í„° ì„ íƒ
        function selectCharacter(character) {
            gameState.character = character;
            gameState.isGameActive = true;

            // í™”ë©´ ì „í™˜
            document.getElementById('character-selection').style.display = 'none';
            document.getElementById('battle-screen').style.display = 'block';

            // ìºë¦­í„° ì •ë³´ ì„¤ì •
            const charData = characters[character];
            document.getElementById('player-image').src = charData.image;
            document.getElementById('player-name').textContent = charData.name;

            // ë¸Œë ˆì´ì»¤ë©´ íŠ¹ë³„í•œ ê¸€ë¡œìš° íš¨ê³¼
            if (character === 'breaker') {
                document.getElementById('player-image').classList.add('breaker-glow');
            }

            // ìŠ¤í‚¬ ë²„íŠ¼ ìƒì„±
            generateSkillButtons(charData.skills, character);

            // ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
            resetGameState();
        }

        // ìŠ¤í‚¬ ë²„íŠ¼ ìƒì„±
        function generateSkillButtons(skills, character) {
            const container = document.getElementById('skills-container');
            container.innerHTML = '';

            skills.forEach(skill => {
                const button = document.createElement('button');
                button.className = character === 'breaker' ? 'skill-btn breaker-skill' : 'skill-btn';
                button.textContent = skill;
                button.onclick = () => useSkill(skill);
                container.appendChild(button);
            });
        }

        // ìŠ¤í‚¬ ì‚¬ìš©
        function useSkill(skillName) {
            if (!gameState.isGameActive) return;

            const isBreaker = gameState.character === 'breaker';
            let damage = 0;
            let message = '';

            if (isBreaker) {
                // ë¸Œë ˆì´ì»¤: 40% í™•ë¥ ë¡œ ê¸ì •, 60% í™•ë¥ ë¡œ ë¶€ì •
                const isPositive = Math.random() < 0.4;
                
                if (isPositive) {
                    // ê¸ì • ìƒí™©: ë†’ì€ ë°ë¯¸ì§€
                    damage = Math.floor(Math.random() * 200) + 250; // 250-450 ë°ë¯¸ì§€
                    const randomMsg = breakerPositiveMessages[Math.floor(Math.random() * breakerPositiveMessages.length)];
                    message = `ğŸ’¥ ${skillName}! ${damage} ë°ë¯¸ì§€! ${randomMsg}`;
                } else {
                    // ë¶€ì • ìƒí™©: ë‚®ì€ ë°ë¯¸ì§€ ë˜ëŠ” MISS
                    const isMiss = Math.random() < 0.4; // 40% í™•ë¥ ë¡œ MISS
                    
                    if (isMiss) {
                        damage = 0;
                        const randomMsg = breakerNegativeMessages[Math.floor(Math.random() * breakerNegativeMessages.length)];
                        message = `ğŸ’” ${skillName} MISS! ${randomMsg}`;
                    } else {
                        damage = Math.floor(Math.random() * 100) + 50; // 50-150 ë°ë¯¸ì§€
                        const randomMsg = breakerNegativeMessages[Math.floor(Math.random() * breakerNegativeMessages.length)];
                        message = `ğŸ˜ ${skillName}ë¡œ ${damage} ë°ë¯¸ì§€! í•˜ì§€ë§Œ ${randomMsg}`;
                    }
                }
                
            } else {
                // ìŠ¤íŠ¸ë¼ì´ì»¤: 40% í™•ë¥ ë¡œ ê¸ì •, 60% í™•ë¥ ë¡œ ë¶€ì •
                const isPositive = Math.random() < 0.4;
                
                if (isPositive) {
                    // ê¸ì • ìƒí™©: ë†’ì€ ë°ë¯¸ì§€
                    damage = Math.floor(Math.random() * 200) + 250; // 250-450 ë°ë¯¸ì§€
                    const randomMsg = strikerPositiveMessages[Math.floor(Math.random() * strikerPositiveMessages.length)];
                    message = `âš¡ ${skillName}! ${damage} ë°ë¯¸ì§€! ${randomMsg}`;
                } else {
                    // ë¶€ì • ìƒí™©: ë‚®ì€ ë°ë¯¸ì§€ ë˜ëŠ” MISS
                    const isMiss = Math.random() < 0.4; // 40% í™•ë¥ ë¡œ MISS
                    
                    if (isMiss) {
                        damage = 0;
                        const randomMsg = strikerNegativeMessages[Math.floor(Math.random() * strikerNegativeMessages.length)];
                        message = `ğŸ’” ${skillName} MISS! ${randomMsg}`;
                    } else {
                        damage = Math.floor(Math.random() * 100) + 50; // 50-150 ë°ë¯¸ì§€
                        const randomMsg = strikerNegativeMessages[Math.floor(Math.random() * strikerNegativeMessages.length)];
                        message = `ğŸ˜¢ ${skillName}ë¡œ ${damage} ë°ë¯¸ì§€... ${randomMsg}`;
                    }
                }
            }

            // ë°ë¯¸ì§€ ì ìš©
            gameState.bossHp = Math.max(0, gameState.bossHp - damage);
            updateUI();

            // ë¡œê·¸ ì—…ë°ì´íŠ¸
            document.getElementById('action-log').innerHTML = message;

            // ë°ë¯¸ì§€ ì• ë‹ˆë©”ì´ì…˜
            if (damage > 0) {
                if (damage >= 250) {
                    // ê³ ë”œì¼ ë•Œ í¬ë¦¬í‹°ì»¬ ì• ë‹ˆë©”ì´ì…˜
                    document.getElementById('boss-image').classList.add('critical-hit');
                    setTimeout(() => {
                        document.getElementById('boss-image').classList.remove('critical-hit');
                    }, 600);
                    showFloatingDamage(damage);
                } else {
                    // ë‚®ì€ ë”œì¼ ë•Œ ì¼ë°˜ ì• ë‹ˆë©”ì´ì…˜
                    document.getElementById('boss-image').classList.add('damage-flash');
                    setTimeout(() => {
                        document.getElementById('boss-image').classList.remove('damage-flash');
                    }, 400);
                }
            }

            // í„´ ì¦ê°€
            gameState.currentTurn++;

            // ê²Œì„ ì¢…ë£Œ ì²´í¬
            setTimeout(() => {
                checkGameEnd();
            }, 1200);
        }

        // í”Œë¡œíŒ… ë°ë¯¸ì§€ í‘œì‹œ
        function showFloatingDamage(damage) {
            const bossArea = document.querySelector('.boss-area');
            const floatingDamage = document.createElement('div');
            floatingDamage.className = 'floating-damage';
            floatingDamage.textContent = damage;
            floatingDamage.style.position = 'absolute';
            floatingDamage.style.left = '50%';
            floatingDamage.style.top = '50%';
            floatingDamage.style.transform = 'translate(-50%, -50%)';
            
            bossArea.style.position = 'relative';
            bossArea.appendChild(floatingDamage);

            setTimeout(() => {
                if (floatingDamage.parentNode) {
                    floatingDamage.parentNode.removeChild(floatingDamage);
                }
            }, 1000);
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('current-turn').textContent = gameState.currentTurn;
            document.getElementById('boss-current-hp').textContent = gameState.bossHp;

            const hpPercentage = (gameState.bossHp / gameState.maxBossHp) * 100;
            document.getElementById('boss-hp-bar').style.width = hpPercentage + '%';
        }

        // ê²Œì„ ì¢…ë£Œ ì²´í¬
        function checkGameEnd() {
            if (gameState.bossHp <= 0) {
                showResult(true);
            } else if (gameState.currentTurn > gameState.maxTurns) {
                showResult(false);
            }
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult(isVictory) {
            gameState.isGameActive = false;

            document.getElementById('battle-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            const resultContent = document.getElementById('result-content');
            const charName = characters[gameState.character].name;

            if (isVictory) {
                if (gameState.character === 'breaker') {
                    resultContent.innerHTML = `
                        <h2 class="result-title victory-title">ğŸ‰ ì¹´ì œë¡œìŠ¤ ë ˆì´ë“œ í´ë¦¬ì–´! ğŸ‰</h2>
                        <p class="result-text">
                            <strong>${charName}</strong>ì˜ ì•ˆì •ì ì¸ í—¤ë“œ ë”œë§ìœ¼ë¡œ ì¹´ì œë¡œìŠ¤ë¥¼ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤!
                        </p>
                        <p class="result-text" style="color: #ffd700;">
                            ê·¸ëƒ¥ ë¸Œë ˆì´ì»¤ í•˜ì‹­ì‡¼..
                        </p>
                        <p class="result-text">
                            ğŸ† ì›Œë¡œë“œì™€ ì˜í—ˆë‹˜ì˜ ë„ì›€ìœ¼ë¡œ ì™„ë²½í•œ í´ë¦¬ì–´!
                        </p>
                    `;
                } else {
                    resultContent.innerHTML = `
                        <h2 class="result-title victory-title">ğŸ‰ ì¹´ì œë¡œìŠ¤ ë ˆì´ë“œ í´ë¦¬ì–´! ğŸ‰</h2>
                        <p class="result-text">
                            <strong>${charName}</strong>ì˜ ë°±ì–´íƒ ë”œë§ìœ¼ë¡œ ì¹´ì œë¡œìŠ¤ë¥¼ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤!
                        </p>
                        <p class="result-text" style="color: #66bb6a;">
                            ë°±ì–´íƒ íƒ€ì´ë°ì´ ì˜ ë§ì•˜ë„¤ìš”! ë¸”ë ˆì´ë“œ ì‹œë„ˆì§€ ìµœê³ !
                        </p>
                        <p class="result-text">
                            ğŸ† ì«€ìˆ­ì´ë“¤ì˜ ì‘ì› ë•ë¶„ì— ìŠ¹ë¦¬!
                        </p>
                    `;
                }
            } else {
                if (gameState.character === 'breaker') {
                    resultContent.innerHTML = `
                        <h2 class="result-title defeat-title">ğŸ’€ ë ˆì´ë“œ ì‹¤íŒ¨... ğŸ’€</h2>
                        <p class="result-text">
                            <strong>${charName}</strong>ë¡œë„ ì¹´ì œë¡œìŠ¤ë¥¼ ì²˜ì¹˜í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤...
                        </p>
                        <p class="result-text" style="color: #ff5252;">
                            í—¤ë“œ í¬ì§€ì…˜ì´ ë„ˆë¬´ ì–´ë ¤ì› ë‚˜ìš”? ìŠˆí¼ í”¼ë©´ì´ ê³„ì† ë‚˜ì™”ë„¤ìš”...
                        </p>
                        <p class="result-text" style="color: #ffa726;">
                            âš ï¸ ì›Œë¡œë“œì™€ ë” í˜¸í¡ì„ ë§ì¶°ë³´ì„¸ìš”!
                        </p>
                    `;
                } else {
                    resultContent.innerHTML = `
                        <h2 class="result-title defeat-title">ğŸ’€ ë ˆì´ë“œ ì‹¤íŒ¨... ğŸ’€</h2>
                        <p class="result-text">
                            <strong>${charName}</strong>ë¡œëŠ” ì¹´ì œë¡œìŠ¤ë¥¼ ì²˜ì¹˜í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤...
                        </p>
                        <p class="result-text" style="color: #ff5252;">
                            ë°±ì–´íƒ ë”œëŸ¬ê°€ ë„ˆë¬´ ë§ì•„ì„œ í—¤ë“œë¡œ ê°€ì•¼ í–ˆëŠ”ë°... í˜¸ì‹ íˆ¬ê¸°ê°€ ê·¸ë¦¬ì› ë‚˜ìš”?
                        </p>
                        <p class="result-text" style="color: #ffa726;">
                            âš ï¸ ë°±ì–´íƒ í”„ë¦¬ë”œ êµ¬ê°„ì„ ë” ì—°êµ¬í•´ë³´ì„¸ìš”!
                        </p>
                    `;
                }
            }
        }

        // ê²Œì„ ë¦¬ì…‹
        function resetGame() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('character-selection').style.display = 'block';
            
            // ìƒíƒœ ì´ˆê¸°í™”
            gameState = {
                character: null,
                bossHp: 1000,
                maxBossHp: 1000,
                currentTurn: 1,
                maxTurns: 7,
                isGameActive: false
            };

            // í´ë˜ìŠ¤ ì œê±°
            document.getElementById('player-image').classList.remove('breaker-glow');
        }

        // ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
        function resetGameState() {
            gameState.bossHp = gameState.maxBossHp;
            gameState.currentTurn = 1;
            gameState.isGameActive = true;

            updateUI();
            document.getElementById('action-log').innerHTML = 'ì¹´ì œë¡œìŠ¤ê°€ ë‚˜íƒ€ë‚¬ë‹¤! ì „ì„¤ì˜ ì‹œì‘ì´ë‹¤!';
        }
    </script>
</body>
</html>